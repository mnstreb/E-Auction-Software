<div id="setupWizard" class="setup-wizard-container">
    <div class="wizard-content">
        <div style="text-align: center; margin-bottom: 30px;">
            <!-- Logo Upload Area -->
            <input type="file" id="logoUploadInput" accept="image/*" style="display: none;">
            <div id="logoUploadArea" class="logo-upload-area">
                <img id="wizardLogoPreview" class="uploaded-logo hidden" src="" alt="Contractor Logo">
                <span id="defaultLogoIcon" class="default-icon">üèóÔ∏è</span>
                <p style="color: #6b7280;" id="uploadText" class="upload-text">Drag & drop your logo here, or click to upload</p>
            </div>

            <h1>Project Setup</h1>
            <p style="color: #6b7280;">Let's configure your estimate for accuracy</p>
        </div>

        <div class="step-indicator">
            <div id="step1" class="step active">1</div>
            <div id="step2" class="step inactive">2</div>
            <div id="step3" class="step inactive">3</div>
        </div>

        <div id="wizardStep1">
            <h2 class="text-xl font-semibold mb-6">Project Information</h2>
            <div class="form-group">
                <label for="projectName" class="label">Project Name:</label>
                <input type="text" id="projectName" class="input-field" value="Commercial Construction Project" required>
            </div>
            <div class="form-group">
                <label for="clientName" class="label">Client Name/Company:</label>
                <input type="text" id="clientName" class="input-field" placeholder="e.g., Acme Corp." required>
            </div>
            <div class="form-group">
                <label for="projectType" class="label">Project Type:</label>
                <select id="projectType" class="input-field" required>
                    <option value="Commercial">Commercial</option>
                    <option value="Residential">Residential</option>
                    <option value="Industrial">Industrial</option>
                    <option value="Renovation">Renovation</option>
                </select>
            </div>
            <div class="form-group">
                <label for="projectState" class="label">State/Location:</label>
                <select id="projectState" class="input-field" required>
                    <option value="CA">California</option>
                    <option value="TX">Texas</option>
                    <option value="NY">New York</option>
                    <option value="FL">Florida</option>
                    <option value="WA">Washington</option>
                    <option value="IL">Illinois</option>
                    <option value="AL">Alabama</option> <option value="AK">Alaska</option> <option value="AZ">Arizona</option> <option value="AR">Arkansas</option> <option value="CO">Colorado</option> <option value="CT">Connecticut</option> <option value="DE">Delaware</option> <option value="GA">Georgia</option> <option value="HI">Hawaii</option> <option value="ID">Idaho</option> <option value="IN">Indiana</option> <option value="IA">Iowa</option> <option value="KS">Kansas</option> <option value="KY">Kentucky</option> <option value="LA">Louisiana</option> <option value="ME">Maine</option> <option value="MD">Maryland</option> <option value="MA">Massachusetts</option> <option value="MI">Michigan</option> <option value="MN">Minnesota</option> <option value="MS">Mississippi</option> <option value="MO">Missouri</option> <option value="MT">Montana</option> <option value="NE">Nebraska</option> <option value="NV">Nevada</option> <option value="NH">New Hampshire</option> <option value="NJ">New Jersey</option> <option value="NM">New Mexico</option> <option value="NC">North Carolina</option> <option value="ND">North Dakota</option> <option value="OH">Ohio</option> <option value="OK">Oklahoma</option> <option value="OR">Oregon</option> <option value="PA">Pennsylvania</option> <option value="RI">Rhode Island</option> <option value="SC">South Carolina</option> <option value="SD">South Dakota</option> <option value="TN">Tennessee</option> <option value="UT">Utah</spon> <option value="VT">Vermont</option> <option value="VA">Virginia</option> <option value="WA">Washington</option> <option value="WV">West Virginia</option> <option value="WI">Wisconsin</option> <option value="WY">Wyoming</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="tradesInvolved" class="label">Trades Involved (Select multiple):</label>
                <div class="multi-select-container">
                    <input type="text" id="tradeSearchInput" class="input-field mb-2" placeholder="Search trades...">
                    <div id="selectedTradesDisplay" class="selected-trades-display">
                        Click to select trades...
                    </div>
                    <div id="tradesDropdown" class="multi-select-dropdown hidden">
                        <!-- Checkboxes will be populated here by JS -->
                    </div>
                </div>
            </div>

            <!-- Advanced Details Section -->
            <div class="advanced-link-wrapper mt-6">
                <a href="#" class="advanced-link" id="showAdvancedDetailsLink">Show Advanced Details</a>
            </div>

            <div id="advancedDetailsSection" class="hidden mt-4 pt-4 border-t border-gray-200">
                <h4 class="font-semibold text-lg mb-3">Additional Project Information</h4>
                <div class="form-group">
                    <label for="projectAddress" class="label">Project Street Address:</label>
                    <input type="text" id="projectAddress" class="input-field" placeholder="e.g., 123 Main St.">
                </div>
                <div class="form-group">
                    <label for="projectCity" class="label">City:</label>
                    <input type="text" id="projectCity" class="input-field" placeholder="e.g., Anytown">
                </div>
                <div class="form-group">
                    <label for="projectZip" class="label">Zip Code:</label>
                    <input type="text" id="projectZip" class="input-field" placeholder="e.g., 90210">
                </div>
                <div class="form-group">
                    <label for="startDate" class="label">Start Date:</label>
                    <input type="date" id="startDate" class="input-field">
                </div>
                <div class="form-group">
                    <label for="endDate" class="label">End Date (Optional):</label>
                    <input type="date" id="endDate" class="input-field">
                </div>
                <div class="form-group">
                    <label for="projectID" class="label">Project ID/Number:</label>
                    <input type="text" id="projectID" class="input-field" placeholder="e.g., PROJ-001">
                </div>
                <div class="form-group">
                    <label for="projectDescription" class="label">Project Description/Scope Summary:</label>
                    <textarea id="projectDescription" class="input-field" rows="4" placeholder="Briefly describe the project scope..."></textarea>
                </div>
            </div>


            <div class="flex justify-end gap-3 mt-8">
                <button id="nextStep1Btn" class="btn btn-primary">Next</button>
            </div>
        </div>

        <div id="wizardStep2" class="hidden">
            <h2 class="text-xl font-semibold mb-6">Labor Rates Configuration</h2>
            <p class="text-gray-600 mb-4">Enter the hourly rates for each skill level within the selected trades.</p>
            
            <!-- Container for dynamic labor rate inputs (now a simple list) -->
            <div id="dynamicLaborRateInputs" class="grid gap-4"> 
                <!-- Dynamic labor rate items will be injected here -->
            </div>

            <!-- Advanced link at the bottom-left -->
            <div class="advanced-link-wrapper">
                <a href="#" class="advanced-link" id="advancedLink">Show Advanced Options</a>
            </div>
            
            <!-- Advanced section for adding new skill levels - hidden by default -->
            <div id="advancedSkillLevelControls" class="hidden mt-6 pt-4 border-t border-gray-200">
                <h4 class="font-semibold text-lg mb-3">Add Custom Skill Level</h4>
                <div class="form-group">
                    <label for="newSkillTitle" class="label">New Skill Title:</label>
                    <input type="text" id="newSkillTitle" class="input-field" placeholder="e.g., Lead Journeyman">
                </div>
                <div class="form-group">
                    <label for="newSkillRate" class="label">New Skill Rate ($/hr):</label>
                    <input type="number" id="newSkillRate" class="input-field" value="0">
                </div>
                <button id="addSkillLevelBtn" class="btn btn-primary w-full mt-2">Add Skill Level</button>
            </div>

            <div class="flex justify-between gap-3 mt-8">
                <button id="prevStep2Btn" class="btn btn-primary">Previous</button>
                <button id="nextStep2Btn" class="btn btn-primary">Next</button>
            </div>
        </div>

        <div id="wizardStep3" class="hidden">
            <h2 class="text-xl font-semibold mb-6">Project Settings</h2>

            <!-- Overhead -->
            <div class="form-group">
                <label for="overhead" class="label">Overhead (%):</label>
                <input type="number" id="overhead" class="input-field" value="0" step="0.01">
            </div>

            <!-- Material Markup (NEW FIELD) -->
            <div class="form-group">
                <label for="materialMarkup" class="label">Material Markup (%):</label>
                <input type="number" id="materialMarkup" class="input-field" value="0" step="0.01">
            </div>

            <!-- Desired Profit -->
            <div class="form-group">
                <label for="profitMargin" class="label">Desired Profit (%):</label>
                <input type="number" id="profitMargin" class="input-field" value="0" step="0.01">
            </div>

            <!-- Sales Tax -->
            <div class="form-group">
                <label for="salesTax" class="label">Sales Tax (%):</label>
                <input type="number" id="salesTax" class="input-field" value="0" step="0.01">
            </div>
            
            <div class="form-group">
                <label for="miscellaneous" class="label">Miscellaneous (%):</label>
                <input type="number" id="miscellaneous" class="input-field" value="0" step="0.01">
            </div>

            <!-- Additional Project Considerations with Toggle -->
            <div class="form-group">
                <label class="label">Additional Project Considerations:</label>
                <div class="flex items-center gap-3">
                    <input type="number" id="additionalConsiderationsValue" class="input-field flex-grow" value="0" step="0.01">
                    <span id="additionalConsiderationsUnit" class="font-semibold text-gray-600 w-10 text-center">%</span>
                    <button id="toggleAdditionalConsiderationsBtn" type="button" class="btn btn-primary btn-sm">Toggle</button>
                </div>
            </div>

            <div class="flex justify-between gap-3 mt-8">
                <button id="prevStep3Btn" class="btn btn-primary">Previous</button>
                <button id="startEstimatingBtn" class="btn btn-green">Start Estimating</button>
            </div>
        </div>
    </div>
</div>
